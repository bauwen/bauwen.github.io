<!DOCTYPE html>
<head>
    <title>Controller</title>
    <meta charset="utf-8">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <meta name="apple-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <style>
    body {
        margin: 0px;
        background-color: salmon;
        overflow: hidden;
    }
    
    .container {
        width: 307px;
        min-width: 307px;
        max-width: 307px;
        height: 587px;
        min-height: 587px;
        max-height: 587px;
        border: 0px solid white;
    }
    </style>
</head>
<body>

<div align="center">
    <div class="container">
        <canvas id="display" width="307" height="587" style="background-color: orange;"></canvas>
    </div>
</div>

<script>
var ctx = document.getElementById("display").getContext("2d");

ctx.fillStyle = "black";
ctx.strokeStyle = "black";
ctx.lineWidth = 2;

function renderBackground() {
    ctx.globalAlpha = 0.5;

    var cx = 153;
    var cy = 450;
    var cr = 100;

    ctx.beginPath();
    ctx.arc(cx, cy, cr, 0, 2 * Math.PI);
    ctx.stroke();

    ctx.beginPath();
    ctx.moveTo(cx + Math.cos(Math.PI / 4) * cr, cy - Math.sin(Math.PI / 4) * cr);
    ctx.lineTo(cx + Math.cos(5 * Math.PI / 4) * cr, cy - Math.sin(5 * Math.PI / 4) * cr);
    ctx.stroke();

    ctx.beginPath();
    ctx.moveTo(cx + Math.cos(3 * Math.PI / 4) * cr, cy - Math.sin(3 * Math.PI / 4) * cr);
    ctx.lineTo(cx + Math.cos(7 * Math.PI / 4) * cr, cy - Math.sin(7 * Math.PI / 4) * cr);
    ctx.stroke();

    var bx = 153;
    var by = 70;
    var br = 60;

    ctx.strokeRect(bx - br/2, by - br/2, br, br);
    ctx.strokeRect(bx - 80 - br/2, by + 80 - br/2, br, br);
    ctx.strokeRect(bx + 80 - br/2, by + 80 - br/2, br, br);
    ctx.strokeRect(bx - br/2, by + 160 - br/2, br, br);
}

function render() {
    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
    renderBackground();
    
    if (mouseDown) {
        ctx.beginPath();
        ctx.arc(mouseX, mouseY, 40, 0, 2 * Math.PI);
        ctx.fill();
    }
    
    requestAnimationFrame(render);
}

var mouseX = 0;
var mouseY = 0;
var mouseDown = false;

window.onmousedown = function (evt) {
    mouseDown = true;
};

window.onmouseup = function (evt) {
    mouseDown = false;
};

window.onmousemove = function (evt) {
    var rect = ctx.canvas.getBoundingClientRect();
    mouseX = evt.pageX - window.scrollX - rect.left;
    mouseY = evt.pageY - window.scrollY - rect.top;
};

window.ontouchstart = function (evt) {
    var rect = ctx.canvas.getBoundingClientRect();
    mouseX = evt.touches[0].pageX - window.scrollX - rect.left;
    mouseY = evt.touches[0].pageY - window.scrollY - rect.top;
    mouseDown = true;
};

window.ontouchend = function (evt) {
    mouseDown = false;
};

window.ontouchcancel = function (evt) {
    mouseDown = false;
};

window.ontouchmove = function (evt) {
    evt.preventDefault();
    evt.stopImmediatePropagation();
    
    mouseX = evt.touches[0].pageX - window.scrollX;
    mouseY = evt.touches[0].pageY - window.scrollY;
};

window.onload = render;
</script>

</body>
</html>