<!DOCTYPE html>
<head>
    <title>Testy</title>
    <meta charset="utf-8">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <meta name="apple-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="manifest" href="manifest.json">
    <style>
    body {
        margin: 0px;
        background-color: salmon;
        border: 3px solid red;
        
        max-width: 100%;
        max-height: 100%;
        overflow: hidden;
    }
    
    #message {
        font-size: 64px;
    }
    </style>
</head>
<body>

<div id="menu" align="center">
    <h1>Testy</h1><br>
    <button onclick="show()">Click here please</button>
</div>
<canvas id="canvas" style="display: none"></canvas>

<script>
var menu = document.getElementById("menu");
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
var mouseX = 0;
var mouseY = 0;
var holding = false;
var x = 100;
var y = 100;

screen.orientation.lock("portrait");

function show() {
    menu.style.display = "none";
    canvas.style.display = "block";
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight - 6;
}

window.onmousedown = function (evt) {
    holding = true;
};

window.onmouseup = function (evt) {
    holding = false;
};

window.onmousemove = function (evt) {
    mouseX = evt.pageX - window.scrollX;
    mouseY = evt.pageY - window.scrollY;
};

window.ontouchstart = function (evt) {    
    mouseX = evt.touches[0].pageX - window.scrollX;
    mouseY = evt.touches[0].pageY - window.scrollY;
    holding = true;
};

window.ontouchend = function (evt) {
    holding = false;
};

window.ontouchcancel = function (evt) {
    holding = false;
};

window.ontouchmove = function (evt) {
    evt.preventDefault();
    evt.stopImmediatePropagation();
    mouseX = evt.touches[0].pageX - window.scrollX;
    mouseY = evt.touches[0].pageY - window.scrollY;
};

function loop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    ctx.fillStyle = "red";
    ctx.fillRect(x, y, 32, 32);
    
    if (holding) {
        var len = Math.sqrt(Math.pow(x - mouseX, 2) + Math.pow(y - mouseY, 2)) / 10;
        var dir = Math.atan2(y - mouseY, mouseX - x);
        x += Math.cos(dir) * len;
        y -= Math.sin(dir) * len;
    }
    
    window.requestAnimationFrame(loop);
}

window.onload = loop;
</script>

</body>
</html>